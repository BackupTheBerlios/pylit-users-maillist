<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [pylit] code_block_marker options
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pylit-users/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:pylit-users%40lists.berlios.de?Subject=Re%3A%20%5Bpylit%5D%20code_block_marker%20options&In-Reply-To=%3C20110308212946.000054e1%40unknown%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000013.html">
   <LINK REL="Next"  HREF="000015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pylit] code_block_marker options</H1>
    <B>Bill Purcell</B> 
    <A HREF="mailto:pylit-users%40lists.berlios.de?Subject=Re%3A%20%5Bpylit%5D%20code_block_marker%20options&In-Reply-To=%3C20110308212946.000054e1%40unknown%3E"
       TITLE="[pylit] code_block_marker options">william at whpiv.net
       </A><BR>
    <I>Wed Mar  9 04:29:46 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000013.html">[pylit] code_block_marker options
</A></li>
        <LI>Next message: <A HREF="000015.html">[pylit] code_block_marker options
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14">[ date ]</a>
              <a href="thread.html#14">[ thread ]</a>
              <a href="subject.html#14">[ subject ]</a>
              <a href="author.html#14">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 8 Mar 2011 00:38:18 +0100
Guenter Milde &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/pylit-users">g.milde at quantentunnel.de</A>&gt; wrote:

&gt;<i> On  2.03.11, Bill Purcell wrote:
</I>&gt;<i> &gt; I would like to add options to my code_block_marker.  For example I
</I>&gt;<i> &gt; would like to support the following
</I>&gt;<i> 
</I>&gt;<i> &gt; # .. mycodeblockdirective::
</I>&gt;<i> &gt; #    :someargument: value
</I>&gt;<i> 
</I>&gt;<i> &gt; x = 1
</I>&gt;<i> 
</I>&gt;<i> While this looks like a valid directive syntax (if converted to rst), 
</I>&gt;<i> I never came across such an example.
</I>&gt;<i>
</I>&gt;<i> Did you implement such a directive? Does it work? What is the use
</I>&gt;<i> case? Could this be done with an argument instead of an option
</I>
I have implemented such a directive.  I have called it the py
directive.  I spent some time and pulled it out of a personal repo and
put it in something I could share [1]. This directive executes the
python code within the directive and tries to output it cleanly either
as an equation or as a code block.  A namespace is shared across all
directives.  I have been using this for engineering calculations at
work for a couple years (this combined with python-quantities makes
for a pretty powerful tool ... kind of like MathCAD). (Not this exact
version but one similar). Anyway, it supports things like

.. py::

   y = 1

.. py::
   :showsource:

   x = 5/y

will output

y = 1

in one equation and 

x &amp; =  5 \frac{1}{y}\\
  &amp; =  5 \\

in the second equation.  PyLit would come into play when I want to keep
my primary calculation files in a python file, execute it with print
statements and then generate a report later using PyLit to go from
python to rst and using my directive to execute the report and make
clean math.
 
&gt;<i> &gt; Would PyLit be interested in supporting more complex
</I>&gt;<i> &gt; code_block_markers?
</I>&gt;<i> 
</I>&gt;<i> My interest in PyLit is to get a simple and elegant program, so I
</I>&gt;<i> would rather not make things more complex just for the sake of
</I>&gt;<i> completeness.
</I>&gt;<i> 
</I>&gt;<i> On the other hand, PyLit shall be a usefull tool, so if there is a
</I>&gt;<i> valid user case we can try to get this done &quot;the right way&quot;.
</I>
I have implemented a work around in a front end I use for processing my
calculation files [2].  I use a preprocessor to combine all the
directive options into the directive line and then a postprocessor to
extract them back out of the directive line.

I can imagine other situations where a user might want to have the
lines numbered in the code blocks.  Supporting directive options would
allow a user to do something like 

# .. code_block:: python
#    :linenos:

for i in range(5):
    print i

I don't know if this is enticing enough for you to make your code more
complex though.  

Aside from all this, I have found a work around and appreciate a clean
and efficient tool to work with.

- Bill

P.S. Please excuse my code if you download it.  I need to tidy things
up.
P.S.S. This code executes dynamically so please be careful.  I don't
want to be accused of messing something up on your computer ;).

[1] git clone <A HREF="git://git.whpiv.net/py_directive.git">git://git.whpiv.net/py_directive.git</A>
[2] git clone <A HREF="git://git.whpiv.net/pyrst.git">git://git.whpiv.net/pyrst.git</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000013.html">[pylit] code_block_marker options
</A></li>
	<LI>Next message: <A HREF="000015.html">[pylit] code_block_marker options
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14">[ date ]</a>
              <a href="thread.html#14">[ thread ]</a>
              <a href="subject.html#14">[ subject ]</a>
              <a href="author.html#14">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pylit-users">More information about the Pylit-users
mailing list</a><br>
</body></html>
